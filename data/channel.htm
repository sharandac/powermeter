<html>
<head>
   <meta charset='utf-8'>
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="styles.css">
<script src="jquery-lastest.min.js" type="text/javascript"></script>
<script src="alarm.js" type="text/javascript"></script>
<script src="script.js"></script>
</head>
<body>
<div id='cssmenu'>
<ul>
    <li><a href='index.htm'>Main</a></li>
    <li><a href='channel.htm'>channel settings</a></li>
    <li><a href='group.htm'>group settings</a></li>
    <li><a href='display.htm'>Display settings</a></li>
    <li><a href='ioport.htm'>IO Port settings</a></li>
    <li><a href='live.htm'>Live view</a></li>
    <li><a href='mqtt.htm'>MQTT settings</a></li>
    <li><a href='wlan.htm'>WLAN settings</a></li>
    <li><a href='update.htm'>Web update</a></li>
    <li><a href='info.htm'>Info</a></li>
</ul>
</div>
<div id="measurement_settings" class="hbox">
  <h2>general adc settings</h2>
  <div class="vbox">
    <label>AC voltage base frequency in Hz</label><br>
    <div class="box">
      <input type='text' size='32' id='network_frequency'></input>
    </div>
  </div>
  <div class="vbox">
    <label>sample rate correction value in Hz</label><br>
    <div class="box">
      <input type='text' size='32' id='samplerate_corr'></input>
    </div>
  </div>
  <h2>virtual channel settings</h2>
  <div class="vbox">
    <label>channel</label><br>
    <div class="box">
      <div class="select-wrapper"><select id="channel" name="channel" onchange='SendSetting("channel");get_channel_config();refreshOpcode( "channel_opcodeseq_str" );'><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="10">Channel 10</option><option value="11">Channel 11</option><option value="12">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <input type="checkbox" id="realtime_edit" name="realtime_edit" unchecked><label for="realtime_edit"> allow realtime editing, but don't forget save your settings!</label>
  </div class="vbox">
  <div class="vbox">
    </label>name</label><br>
    <div class="box">
      <input type='text' size='32' id='channel_name' onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_name" );'></input>
    </div>
  </div>
  <div class="vbox">
    <label>group</label><br>
    <div class="box">
      <div class="select-wrapper"><select id="channel_group_id" name="channel_group_id"><option value="0">group 0</option><option value="1">group 1</option><option value="2">group 2</option><option value="3">group 3</option><option value="4">group 4</option><option value="5">group 5</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <label>report value in</label><br>
    <div class="box">
      <div class="select-wrapper"><select id="channel_report_exp" name="channel_report_exp" onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_report_exp" );'><option value="-3">10^-3 Milli</option><option value="0">10^0</option><option value="3">10^3 Kilo</option></select></div>
    </div>
  </div>
  <h2>sensor settings</h2>
  <div class="vbox">
    <label>predefined Sensor ratio ( <a href="sensor.htm" target="_blank" rel="noopener noreferrer">need help?</a> )</label><br>
    <div class="select-wrapper"><select id="SensorType" name="SensorType" onclick='setSensor( document.getElementById( "SensorType" ).value );'><option value="0.025989163\0\-2048.0">SCT013-000 (~100A/1:2000,62R)</option><option value="0.330000\30\-2048.0">ZMPT101B (~250V/1M:2M)</option><option value="0.006598395\0\-2048.0">ACS712 (=5A/1k:2k)</option><option value="0.012207031\0\-2048.0">ACS712 (=20A/1k:2k)</option><option value="0.018495502\0\-2048.0">ACS712 (=30A/1k:2k)</option><option value="0.008862305\0\0.0">voltage divider (=36V/1k:10k)</option><option value="0.004833984\0\0.0">voltage divider (=19.8V/2k:10k)</option><option value="0.001208496\0\0.0">voltage divider (=4.95V/2k:1k)</option><option value="0.000805664\0\0.0">direct voltage</option></select></div>
  </div>
  <div class="vbox">
    <label>type</label><br>
    <div class="box">
      <div class="select-wrapper"><select id="channel_type" name="channel_type" onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_type" );'><option value="0">AC_CURRENT</option><option value="1">AC_VOLTAGE</option><option value="2">DC_CURRENT</option><option value="3">DC_VOLTAGE</option><option value="4">AC_POWER</option><option value="5">AC_REACTIVE_POWER</option><option value="6">DC_POWER</option><option value="7">CHANNEL_NOT_USED</option></select></select></div>
    </div>
  </div>
  <div class="vbox">
    <input type="checkbox" id="channel_square_rms" name="channel_square_rms" onchange='if( document.getElementById( "realtime_edit" ).checked ) SendCheckboxSetting( "channel_square_rms" );' unchecked><label for="channel_square_rms"> use square rms for AC calculation</label>
  </div class="vbox">
  <div class="vbox">
    </label>ratio</label><br>
    <div class="box">
      <input type='text' size='32' id='channel_ratio' onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_ratio" );'></input>
    </div>
  </div>
  <div class="vbox">
    <label>phaseshift</label><br>
    <div class="box">
      <input type='text' size='32' id='channel_phaseshift' onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_phaseshift" );'></input>
    </div>
  </div>
  <div class="vbox">
    </label>offset</label><br>
    <div class="box">
      <input type='text' size='32' id='channel_offset' onchange='if( document.getElementById( "realtime_edit" ).checked ) SendSetting( "channel_offset" );'></input>
    </div>
  </div>
  <h2>microcode</h2>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_0" name="opcode_0" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_0" name="channel_0"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_1" name="opcode_1" onclick='refreshOpcodeStr( "channel_opcodeseq_str");'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_1" name="channel_1"onclick='refreshOpcodeStr( "channel_opcodeseq_str")';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_2" name="opcode_2" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_2" name="channel_2"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_3" name="opcode_3" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_3" name="channel_3"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_4" name="opcode_4" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_4" name="channel_4"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_5" name="opcode_5" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_5" name="channel_5"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_6" name="opcode_6" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_6" name="channel_6"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_7" name="opcode_7" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_7" name="channel_7"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_8" name="opcode_8" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_8" name="channel_8"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <div class="vbox">
    <div class="box">
      <label>opcode</label><br>
      <div class="select-wrapper"><select id="opcode_9" name="opcode_9" onclick='refreshOpcodeStr( "channel_opcodeseq_str" );'><option value="0">BRK</option><option value="4">NOP</option><option value="1">A = A + OPERAND</option><option value="2">A = A - OPERAND</option><option value="3">A = A * OPERAND</option><option value="8">A = A * OPERAND RATIO</option><option value="9">A = A * OPERAND SIGN</option><option value="b">A = A * OPERAND REACTIVE SIGN</option><option value="a">A = |A|</option><option value="d">NEG</option><option value="e">PASS NEGATIV</option><option value="f">PASS POSITIV</option><option value="5">A = ADC FROM OPERAND</option><option value="7">FILTER A WITH</option><option value="6">SET A TO</option></select></div>
    </div>
    <div class="box">
      <label>operand</label><br>
      <div class="select-wrapper"><select id="channel_9" name="channel_9"onclick='refreshOpcodeStr( "channel_opcodeseq_str" )';><option value="0">Channel 0</option><option value="1">Channel 1</option><option value="2">Channel 2</option><option value="3">Channel 3</option><option value="4">Channel 4</option><option value="5">Channel 5</option><option value="6">Channel 6</option><option value="7">Channel 7</option><option value="8">Channel 8</option><option value="9">Channel 9</option><option value="a">Channel 10</option><option value="b">Channel 11</option><option value="c">Channel 12</option></select></div>
    </div>
  </div>
  <h2>microcode as opcode sequence</h2>
  <div class="vbox">
    <label>old opcode sequence</label><br>
    <div class="box">
      <input type='text' size='32' id='old_channel_opcodeseq_str' name='old_channel_opcodeseq_str' disabled></input>
    </div>
    <div class="box">
      <button type='button' onclick='document.getElementById( "channel_opcodeseq_str" ).value = document.getElementById( "old_channel_opcodeseq_str" ).value; refreshOpcode( "channel_opcodeseq_str" );' class='smallbutton'>restore opcodes</button>
    </div>
  </div>
  <div class="vbox">
    <label>opcode sequence</label><br>
    <div class="box">
      <input type='text' size='32' id='channel_opcodeseq_str' name='channel_opcodeseq_str' onchange='refreshOpcode( "channel_opcodeseq_str" );'></input>
    </div>
  </div>
</div>
<br>
<br>
<button type='button' onclick='SendSetting("network_frequency");SendSetting("samplerate_corr");SendCheckboxSetting("channel_square_rms");SendSetting("channel_opcodeseq_str");SendSetting("channel_type");SendSetting("channel_phaseshift");SendSetting("channel_report_exp");SendSetting("channel_offset");SendSetting("channel_name");SendSetting("channel_ratio");SendSetting("channel_group_id");SaveSettings();get_channel_config();get_measurement_settings();' class='button'>save</button><br><br>
<br>
<br>
<br>
<div id='fixedfooter'><span id='status'>offline</span></div>
</body>
</html>
